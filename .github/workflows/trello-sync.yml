name: Trello Card Sync

on:
  push:
    branches:
      - main
      - develop
      - feature/**

jobs:
  update-trello:
    runs-on: ubuntu-latest
    steps:
      - name: Extract Trello Card ID from commit message
        id: extract
        run: |
          COMMIT_MSG="${{ github.event.head_commit.message }}"
          CARD_ID=$(echo "$COMMIT_MSG" | grep -oP 'TRELLO-\K[A-Za-z0-9]{8}' || echo "")
          echo "Extracted CARD_ID: $CARD_ID"
          echo "card_id=$CARD_ID" >> $GITHUB_OUTPUT
